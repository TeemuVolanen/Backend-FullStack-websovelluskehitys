(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var o=t(17),c=t.n(o),a=t(8),r=t(3),u=t(2),i=t(0),l=function(e){return Object(i.jsxs)("div",{children:["filter shown with:",Object(i.jsx)("input",{value:e.value,onChange:e.onChange})]})},s=function(e){return Object(i.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(i.jsxs)("div",{children:["name:",Object(i.jsx)("input",{value:e.value1,onChange:e.onChange1})]}),Object(i.jsxs)("div",{children:["number:",Object(i.jsx)("input",{value:e.value2,onChange:e.onChange2})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.deletePerson;return Object(i.jsxs)("li",{children:[n.name," ",n.number," ",Object(i.jsx)("button",{onClick:t,children:"delete"})]})},b=t(4),f=t.n(b),j="/api/persons",h={getAll:function(){return f.a.get(j).then((function(e){return e.data}))},create:function(e){return f.a.post(j,e).then((function(e){return e.data}))},deletePerson:function(e){return console.log(e),f.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))}},m=function(e){var n=e.message,t=n[1]?{color:"green",fontStyle:"italic",fontSize:20,border:"2px solid #73AD21",backgroundColor:"#DCDCDC",borderRadius:"5px",margin:"10px",padding:"10px"}:{color:"red",fontStyle:"italic",fontSize:20,border:"2px solid red",backgroundColor:"#DCDCDC",borderRadius:"5px",margin:"10px",padding:"10px"};return null===n[0]?null:Object(i.jsx)("div",{style:t,children:n[0]})},p=function(){var e=Object(u.useState)([]),n=Object(r.a)(e,2),t=n[0],o=n[1],c=Object(u.useState)(""),b=Object(r.a)(c,2),f=b[0],j=b[1],p=Object(u.useState)(""),g=Object(r.a)(p,2),O=g[0],v=g[1],x=Object(u.useState)(""),C=Object(r.a)(x,2),w=C[0],S=C[1],D=Object(u.useState)([null,!0]),k=Object(r.a)(D,2),y=k[0],P=k[1];Object(u.useEffect)((function(){h.getAll().then((function(e){o(e)}))}),[]);var T=""===w?t:t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(m,{message:y}),Object(i.jsx)(l,{value:w,onChange:function(e){console.log(e.target.value),S(e.target.value)}}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(s,{onSubmit:function(e){e.preventDefault();var n={name:f,number:O};if(t.filter((function(e){return e.name===f})).length>0){if(window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))){var c=t.find((function(e){return e.name===f})),r=Object(a.a)(Object(a.a)({},c),{},{number:O});h.update(c.id,r).then((function(e){o(t.map((function(n){return n.name!==f?n:e}))),P(["Changed ".concat(e.name,"'s number "),!0]),setTimeout((function(){P([null,!0])}),5e3)}))}}else h.create(n).then((function(e){o(t.concat(e)),j(""),v(""),P(["Added ".concat(e.name," "),!0]),setTimeout((function(){P([null,!0])}),5e3)})).catch((function(e){P([e.response.data,!1]),setTimeout((function(){P([null,!0])}),5e3),console.log(e.response.data)}))},value1:f,onChange1:function(e){console.log(e.target.value),j(e.target.value)},value2:O,onChange2:function(e){console.log(e.target.value),v(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)("ul",{children:T.map((function(e){return Object(i.jsx)(d,{person:e,deletePerson:function(){return function(e){var n=e.id;window.confirm("Delete ".concat(e.name," ?"))&&(h.deletePerson(n).then(o(t.filter((function(e){return e.id!==n})))).catch((function(n){P(["Information of ".concat(e.name," has already been removed from server "),!1]),setTimeout((function(){P([null,!0])}),5e3)})),P(["".concat(e.name," deleted "),!0]),setTimeout((function(){P([null,!0])}),5e3))}(e)}},e.name)}))})]})};c.a.render(Object(i.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.ce87f7b1.chunk.js.map